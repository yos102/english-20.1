<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>××‘×—×Ÿ ×× ×’×œ×™×ª 108 ××™×œ×™× - ×›×™×ª×” ×–'</title>
    <style>
        :root { --primary: #4a90e2; --success: #48bb78; --error: #f56565; --bg: #f0f4f8; }
        body { font-family: 'Segoe UI', Arial, sans-serif; background-color: var(--bg); margin: 0; padding: 20px; line-height: 1.6; padding-bottom: 60px; }
        .container { max-width: 950px; margin: auto; background: white; padding: 30px; border-radius: 25px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); }
        h1, h3 { color: #2d3748; }
        h1 { text-align: center; }
        h3 { border-right: 5px solid var(--primary); padding-right: 15px; background: #f8fbff; padding: 10px; border-radius: 0 10px 10px 0; margin-top: 30px; }
        .ltr-text { direction: ltr; text-align: left; }

        /* Matching */
        .matching-container { display: flex; justify-content: space-around; margin: 20px 0; }
        .column { display: flex; flex-direction: column; gap: 10px; }
        .match-item { 
            padding: 10px 15px; background: #edf2f7; border: 2px solid #cbd5e0; border-radius: 10px; 
            cursor: pointer; text-align: center; width: 140px; font-weight: bold; transition: 0.2s; 
        }
        .match-item.selected { background: var(--primary); color: white; }
        .match-item.correct { background: var(--success) !important; color: white !important; cursor: default; }
        .match-item.wrong { background: var(--error) !important; color: white !important; }

        /* Drag and Drop */
        .word-bank { background: #fff9c4; padding: 20px; border-radius: 15px; margin: 20px 0; text-align: center; border: 2px dashed #fbc02d; }
        .drag-item { 
            display: inline-block; padding: 8px 16px; background: white; border: 2px solid var(--primary);
            border-radius: 12px; cursor: grab; margin: 5px; font-weight: bold; color: var(--primary);
        }
        /* ×¢×™×¦×•×‘ ×œ××™×œ×” ×©×©×•××©×” */
        .drag-item.used { opacity: 0.3; text-decoration: line-through; pointer-events: none; filter: grayscale(1); }

        .drop-zone, .img-drop-zone { 
            display: inline-block; min-width: 100px; padding: 5px; border-bottom: 3px solid var(--primary); 
            background: #f7fafc; vertical-align: middle; text-align: center; border-radius: 5px 5px 0 0;
        }
        .img-drop-zone { width: 85%; margin: 10px auto; border: 2px dashed var(--primary); min-height: 40px; color: #a0aec0; }
        
        .correct-ans { border-color: var(--success) !important; color: var(--success); background: #f0fff4; }
        .wrong-ans { border-color: var(--error) !important; color: var(--error); background: #fff5f5; }
        .correction-text { color: var(--success); font-weight: bold; font-size: 0.9em; margin-left: 5px; }

        .img-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; }
        .img-card { background: #f8fbff; padding: 15px; border-radius: 15px; text-align: center; border: 1px solid #e2e8f0; }
        .emoji-img { font-size: 60px; display: block; margin-bottom: 10px; }

        .btn-check { width: 100%; padding: 20px; background: #2d3748; color: white; border: none; border-radius: 15px; font-size: 1.4em; cursor: pointer; margin-top: 40px; }
        #final-result { display:none; text-align:center; margin-top:30px; padding:20px; border-radius:15px; }
        .speak-btn { background: none; border: none; cursor: pointer; font-size: 1.2rem; }
        footer { position: absolute; bottom: 10px; left: 20px; font-size: 0.9rem; color: #a0aec0; }
    </style>
</head>
<body>

<div class="container">
    <h1>×”××‘×—×Ÿ ×”×’×“×•×œ ×‘×× ×’×œ×™×ª - ×›×™×ª×” ×–'</h1>
    <p style="text-align: center; font-weight: bold; color: #718096;">×’×¨×•×¨ ××ª ×”××™×œ×™× ×œ××§×•×! ×”××™×œ×™× ×©× ×‘×—×¨×• ×™×™××—×§×• ××”××—×¡×Ÿ.</p>

    <h3>1. ××©×—×§ ×”×–×™×›×¨×•×Ÿ (×”×ª×××”)</h3>
    <div class="matching-container" id="matching-game">
        <div class="column" id="english-cols"></div>
        <div class="column" id="hebrew-cols"></div>
    </div>

    <h3>2. ×”×©×œ× ××ª ×”××©×¤×˜×™×</h3>
    <div id="s-bank" class="word-bank"></div>
    <div id="s-questions" class="ltr-text"></div>

    <h3>3. ××” ×‘×ª××•× ×”?</h3>
    <div id="i-bank" class="word-bank"></div>
    <div id="i-questions" class="img-grid"></div>

    <button class="btn-check" id="main-btn" onclick="calculateGrade()">×¡×™×™××ª×™! ×‘×“×•×§ ×œ×™ ××ª ×”×¦×™×•×Ÿ ğŸ“</button>
    <div id="final-result"></div>
</div>

<footer>eng 20.1</footer>

<script>
    const fullList = [
        { en: "chocolate", he: "×©×•×§×•×œ×“", emoji: "ğŸ«" }, { en: "coffee", he: "×§×¤×”", emoji: "â˜•" },
        { en: "cookie", he: "×¢×•×’×™×™×”", emoji: "ğŸª" }, { en: "juice", he: "××™×¥", emoji: "ğŸ§ƒ" },
        { en: "salad", he: "×¡×œ×˜", emoji: "ğŸ¥—" }, { en: "sandwich", he: "×¡× ×“×•×•×™×¥'", emoji: "ğŸ¥ª" },
        { en: "water", he: "××™×", emoji: "ğŸ’§" }, { en: "apple", he: "×ª×¤×•×—", emoji: "ğŸ" },
        { en: "lemon", he: "×œ×™××•×Ÿ", emoji: "ğŸ‹" }, { en: "pizza", he: "×¤×™×¦×”", emoji: "ğŸ•" },
        { en: "egg", he: "×‘×™×¦×”", emoji: "ğŸ¥š" }, { en: "baby", he: "×ª×™× ×•×§", emoji: "ğŸ‘¶" },
        { en: "bananas", he: "×‘× × ×•×ª", emoji: "ğŸŒ" }, { en: "milk", he: "×—×œ×‘", emoji: "ğŸ¼" },
        { en: "cheese", he: "×’×‘×™× ×”", emoji: "ğŸ§€" }, { en: "chicken", he: "×¢×•×£", emoji: "ğŸ—" },
        { en: "chips", he: "×¦'×™×¤×¡", emoji: "ğŸŸ" }, { en: "chair", he: "×›×™×¡×", emoji: "ğŸª‘" },
        { en: "bread", he: "×œ×—×", emoji: "ğŸ" }, { en: "fish", he: "×“×’", emoji: "ğŸŸ" },
        { en: "carrot", he: "×’×–×¨", emoji: "ğŸ¥•" }, { en: "onion", he: "×‘×¦×œ", emoji: "ğŸ§…" },
        { en: "peppers", he: "×¤×œ×¤×œ×™×", emoji: "ğŸ«‘" }, { en: "table", he: "×©×•×œ×—×Ÿ", emoji: "ğŸª‘" },
        { en: "tomato", he: "×¢×’×‘× ×™×™×”", emoji: "ğŸ…" }, { en: "cake", he: "×¢×•×’×”", emoji: "ğŸ‚" },
        { en: "gift", he: "××ª× ×”", emoji: "ğŸ" }, { en: "ice cream", he: "×’×œ×™×“×”", emoji: "ğŸ¦" },
        { en: "mother", he: "×××", emoji: "ğŸ‘©" }, { en: "father", he: "××‘×", emoji: "ğŸ‘¨" },
        { en: "teacher", he: "××•×¨×”", emoji: "ğŸ‘©â€ğŸ«" }, { en: "cat", he: "×—×ª×•×œ", emoji: "ğŸ±" },
        { en: "dog", he: "×›×œ×‘", emoji: "ğŸ¶" }, { en: "sun", he: "×©××©", emoji: "â˜€ï¸" }
    ];

    const sentences = [
        { q: "I sit on a ____.", a: "chair" }, { q: "The baby drinks ____.", a: "milk" },
        { q: "I eat an ____ for breakfast.", a: "egg" }, { q: "My ____ is a teacher.", a: "mother" },
        { q: "I'm hungry, I want to eat ____.", a: "pizza" }, { q: "I have a ____ for your birthday.", a: "gift" },
        { q: "I like ____ with my hamburger.", a: "chips" }, { q: "A ____ is red and round.", a: "tomato" }
    ];

    let selectedEng = null;
    let scoreMatch = 0;
    const size = 8;

    const shuffle = (arr) => arr.sort(() => 0.5 - Math.random());

    function init() {
        const selSentences = shuffle([...sentences]).slice(0, size);
        const selEmojis = shuffle(fullList.filter(x => x.emoji)).slice(0, size);
        const usedWords = new Set([...selSentences.map(s=>s.a), ...selEmojis.map(e=>e.en)]);
        const selMatch = shuffle(fullList.filter(w => !usedWords.has(w.en))).slice(0, size);

        // 1. Matching Logic
        const engCols = document.getElementById('english-cols');
        const hebCols = document.getElementById('hebrew-cols');
        const shuffledHeb = shuffle([...selMatch]);

        selMatch.forEach(item => {
            const div = createEl('div', 'match-item', item.en, engCols);
            div.onclick = () => {
                if(div.classList.contains('correct')) return;
                if(selectedEng) selectedEng.classList.remove('selected');
                selectedEng = div;
                div.classList.add('selected');
            };
        });

        shuffledHeb.forEach(item => {
            const div = createEl('div', 'match-item', item.he, hebCols);
            div.onclick = () => {
                if(!selectedEng || div.classList.contains('correct')) return;
                const correctHe = fullList.find(v => v.en === selectedEng.innerText).he;
                if(correctHe === item.he) {
                    selectedEng.className = div.className = 'match-item correct';
                    selectedEng = null;
                    scoreMatch++;
                } else {
                    div.classList.add('wrong');
                    setTimeout(() => div.classList.remove('wrong'), 500);
                }
            };
        });

        // 2 & 3. Drag & Drop Logic
        renderDragSection('s', selSentences.map(x => x.a), selSentences);
        renderDragSection('i', selEmojis.map(x => x.en), selEmojis);
    }

    function renderDragSection(prefix, words, questions) {
        const bank = document.getElementById(`${prefix}-bank`);
        const container = document.getElementById(`${prefix}-questions`);
        
        shuffle(words).forEach(w => {
            const item = createEl('div', 'drag-item', w, bank);
            item.draggable = true;
            item.id = `${prefix}-word-${w}`;
            item.ondragstart = (e) => e.dataTransfer.setData("text", w + "|" + prefix);
        });

        questions.forEach((q, i) => {
            const div = document.createElement('div');
            div.className = prefix === 's' ? "sentence-row" : "";
            if(prefix === 's') {
                div.innerHTML = `<button class="speak-btn" onclick="speak('${q.q}')">ğŸ”Š</button> 
                                 <span>${q.q.replace('____', `<div class="drop-zone" data-ans="${q.a}" ondrop="drop(event)" ondragover="allowDrop(event)"></div>`)}</span>`;
            } else {
                div.className = "img-card";
                div.innerHTML = `<span class="emoji-img">${q.emoji}</span>
                                 <div class="img-drop-zone" data-ans="${q.en}" ondrop="drop(event)" ondragover="allowDrop(event)">×’×¨×•×¨...</div>`;
            }
            container.appendChild(div);
        });
    }

    function allowDrop(e) { e.preventDefault(); }

    function drop(e) {
        e.preventDefault();
        const [word, prefix] = e.dataTransfer.getData("text").split("|");
        const zone = e.target;

        // ×× ×›×‘×¨ ×”×™×™×ª×” ××™×œ×” ×‘×ª×™×‘×”, × ×—×–×™×¨ ××•×ª×” ×œ×”×™×•×ª ×¤×¢×™×œ×” ×‘××—×¡×Ÿ
        if (zone.innerText && zone.innerText !== "×’×¨×•×¨...") {
            const oldWordId = `${prefix}-word-${zone.innerText}`;
            if(document.getElementById(oldWordId)) document.getElementById(oldWordId).classList.remove('used');
        }

        // ×¢×“×›×•×Ÿ ×”×ª×™×‘×”
        zone.innerText = word;
        zone.style.color = "var(--primary)";
        
        // ×¡×™××•×Ÿ ×”××™×œ×” ×”×—×“×©×” ×›"××©×•××©×ª" ×‘××—×¡×Ÿ
        document.getElementById(`${prefix}-word-${word}`).classList.add('used');
    }

    function calculateGrade() {
        let sCorrect = 0, iCorrect = 0;
        
        document.querySelectorAll('.drop-zone, .img-drop-zone').forEach(z => {
            const isCorrect = z.innerText.trim() === z.dataset.ans;
            z.className += isCorrect ? " correct-ans" : " wrong-ans";
            if(isCorrect) z.classList.contains('drop-zone') ? sCorrect++ : iCorrect++;
            else if(z.classList.contains('drop-zone')) z.insertAdjacentHTML('afterend', `<span class="correction-text">(${z.dataset.ans})</span>`);
            else z.innerText += ` -> ${z.dataset.ans}`;
        });

        const total = Math.round((scoreMatch/size)*30 + (sCorrect/size)*35 + (iCorrect/size)*35);
        const res = document.getElementById('final-result');
        res.style.display = "block";
        res.innerHTML = `<h2>×¦×™×•×Ÿ: ${total}</h2><button class="btn-check" onclick="location.reload()">××‘×—×Ÿ ×—×“×© ğŸ”„</button>`;
        document.getElementById('main-btn').style.display = 'none';
    }

    function createEl(tag, cls, txt, parent) {
        const el = document.createElement(tag);
        el.className = cls; el.innerText = txt;
        if(parent) parent.appendChild(el);
        return el;
    }

    function speak(t) {
        const m = new SpeechSynthesisUtterance(t.replace("____", "blank"));
        m.lang = 'en-US'; window.speechSynthesis.speak(m);
    }

    init();
</script>
</body>
</html>
